<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNS Manager</title>
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body id="game-body">
    <div class="game-container">
        <header class="game-header">
            <h1><i class="fas fa-store"></i> DNS Manager</h1>
            <div class="stats">
                <div class="money">üí∞ <span id="money">0</span> ‚ÇΩ</div>
                <div class="level">üèÜ –£—Ä. <span id="level">1</span></div>
                <div class="rating">‚≠ê –†–µ–π—Ç–∏–Ω–≥: <span id="rating">5</span>/5 (<span id="income-multiplier">√ó1</span>)</div>
                <div class="customers">üë• <span id="customers">0/10</span></div>
                <div class="passive-income">üìà +<span id="passive-income">0</span> ‚ÇΩ/—Å–µ–∫</div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="customer-progress"></div>
            </div>
        </header>

        <main>
            <div class="click-area">
                <button id="click-button">–û–±—Å–ª—É–∂–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
                <p class="click-hint">+<span id="click-value">10</span> ‚ÇΩ –∑–∞ –∫–ª–∏–∫</p>
                <div class="click-effect" id="click-effect"></div>
            </div>

            <div class="staff">
                <h2><i class="fas fa-users"></i> –ü–µ—Ä—Å–æ–Ω–∞–ª</h2>
                <div class="employee" data-role="seller">
                    <h3><i class="fas fa-user-tie"></i> –ü—Ä–æ–¥–∞–≤–µ—Ü</h3>
                    <p>–î–æ—Ö–æ–¥: +<span class="income">10</span> ‚ÇΩ/–∫–ª–∏–∫</p>
                    <p>–ù–∞–Ω—è—Ç–æ: <span class="count">0</span></p>
                    <button class="hire-btn" data-cost="150">–ù–∞–Ω—è—Ç—å (150 ‚ÇΩ)</button>
                </div>
                <div class="employee" data-role="consultant">
                    <h3><i class="fas fa-headset"></i> –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</h3>
                    <p>–î–æ—Ö–æ–¥: +<span class="income">1</span> ‚ÇΩ/—Å–µ–∫</p>
                    <p>–ù–∞–Ω—è—Ç–æ: <span class="count">0</span></p>
                    <button class="hire-btn" data-cost="300">–ù–∞–Ω—è—Ç—å (300 ‚ÇΩ)</button>
                </div>
                <div class="employee" data-role="warehouse">
                    <h3><i class="fas fa-boxes"></i> –°–∫–ª–∞–¥—Å–∫–æ–π</h3>
                    <p>–£—Å–∫–æ—Ä—è–µ—Ç –ø–æ—Å—Ç–∞–≤–∫–∏ (x<span class="multiplier">1</span>)</p>
                    <p>–ù–∞–Ω—è—Ç–æ: <span class="count">0</span></p>
                    <button class="hire-btn" data-cost="500">–ù–∞–Ω—è—Ç—å (500 ‚ÇΩ)</button>
                </div>
            </div>

            <div class="upgrades">
                <h2><i class="fas fa-cog"></i> –£–ª—É—á—à–µ–Ω–∏—è</h2>
                <div class="upgrade" data-upgrade="training">
                    <h3><i class="fas fa-graduation-cap"></i> –û–±—É—á–µ–Ω–∏–µ</h3>
                    <p>+20% –∫ –¥–æ—Ö–æ–¥—É –ø—Ä–æ–¥–∞–≤—Ü–æ–≤</p>
                    <button class="buy-btn" data-cost="1000">–ö—É–ø–∏—Ç—å (1000 ‚ÇΩ)</button>
                </div>
                <div class="upgrade" data-upgrade="marketing">
                    <h3><i class="fas fa-ad"></i> –†–µ–∫–ª–∞–º–∞</h3>
                    <p>+50% –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
                    <button class="buy-btn" data-cost="2000">–ö—É–ø–∏—Ç—å (2000 ‚ÇΩ)</button>
                </div>
            </div>
        </main>

        <footer>
            <button id="theme-toggle"><i class="fas fa-moon"></i> –¢–µ–º–∞</button>
        </footer>
    </div>

    <script>
        // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
let money = 0;
let level = 1;
let customers = 0;
let maxCustomers = 10;
let clickValue = 10;
let rating = 5;
let ratingDebuff = 1;
let maxRating = 5;

// –ü–µ—Ä—Å–æ–Ω–∞–ª
const staff = {
    seller: { count: 0, attraction: 0.2, cost: 150, income: 3 },
    consultant: { count: 0, income: 5, cost: 300 },
    warehouse: { count: 0, multiplier: 0.01, cost: 500 }
};

// –£–ª—É—á—à–µ–Ω–∏—è
const upgrades = {
    training: { 
        bought: false, 
        cost: 1000, 
        effect: () => { staff.seller.income *= 1.2; }
    },
    marketing: { 
        bought: false, 
        cost: 2000, 
        effect: () => { maxRating = 7; }
    }
};

// –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
function loadGame() {
    const save = JSON.parse(localStorage.getItem('dnsManagerSave'));
    if (save) {
        money = save.money || 0;
        level = save.level || 1;
        customers = save.customers || 0;
        maxCustomers = save.maxCustomers || 10;
        rating = save.rating || 5;
        ratingDebuff = save.ratingDebuff || 1;
        maxRating = save.maxRating || 5;
        
        // –ì–ª—É–±–æ–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
        for (const role in staff) {
            if (save.staff?.[role]) {
                staff[role] = {...staff[role], ...save.staff[role]};
            }
        }
        
        for (const upgrade in upgrades) {
            if (save.upgrades?.[upgrade]) {
                upgrades[upgrade] = {...upgrades[upgrade], ...save.upgrades[upgrade]};
            }
        }
    }
    updateUI();
}

function saveGame() {
    localStorage.setItem('dnsManagerSave', JSON.stringify({
        money, level, customers, maxCustomers,
        rating, ratingDebuff, maxRating,
        staff, upgrades
    }));
}

// –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ
document.getElementById('click-button').addEventListener('click', () => {
    if (customers >= 1) {
        money += calculateClickValue() * rating * ratingDebuff;
        customers--;
        rating = Math.min(maxRating, rating + 0.1);
        updateUI();
        saveGame();
    }
});

// –ù–∞–π–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
document.querySelectorAll('.hire-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const role = this.closest('.employee').dataset.role;
        if (money >= staff[role].cost) {
            money -= staff[role].cost;
            staff[role].count++;
            staff[role].cost = Math.floor(staff[role].cost * 1.2);
            updateUI();
            saveGame();
        }
    });
});

// –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π
document.querySelectorAll('.buy-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const upgrade = this.closest('.upgrade').dataset.upgrade;
        if (!upgrades[upgrade].bought && money >= upgrades[upgrade].cost) {
            money -= upgrades[upgrade].cost;
            upgrades[upgrade].bought = true;
            upgrades[upgrade].effect();
            updateUI();
            saveGame();
        }
    });
});

// –†–∞—Å—á–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∫–ª–∏–∫–∞
function calculateClickValue() {
    const warehouseMultiplier = 1 + staff.warehouse.count * staff.warehouse.multiplier;
    return (clickValue + staff.seller.count * staff.seller.income) * warehouseMultiplier;
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
function updateUI() {
    document.getElementById('money').textContent = Math.floor(money);
    document.getElementById('level').textContent = level;
    document.getElementById('click-value').textContent = calculateClickValue().toFixed(1);
    document.getElementById('customers').textContent = `${Math.floor(customers)}/${maxCustomers}`;
    document.getElementById('customer-progress').style.width = `${Math.min(100, (customers / maxCustomers) * 100)}%`;
    document.getElementById('rating').textContent = rating.toFixed(1);
    document.getElementById('income-multiplier').textContent = `√ó${ratingDebuff}`;
    
    // –†–∞—Å—Å—á–µ—Ç –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞
    const warehouseMultiplier = 1 + staff.warehouse.count * staff.warehouse.multiplier;
    const passiveIncome = staff.consultant.count * staff.consultant.income * warehouseMultiplier;
    document.getElementById('passive-income').textContent = passiveIncome.toFixed(1);
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
    document.querySelectorAll('.employee').forEach(el => {
        const role = el.dataset.role;
        el.querySelector('.count').textContent = staff[role].count;
        const btn = el.querySelector('.hire-btn');
        btn.textContent = `–ù–∞–Ω—è—Ç—å (${Math.floor(staff[role].cost)} ‚ÇΩ)`;
        btn.disabled = money < staff[role].cost;
    });
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π
    document.querySelectorAll('.upgrade').forEach(el => {
        const upgrade = el.dataset.upgrade;
        const btn = el.querySelector('.buy-btn');
        if (upgrades[upgrade].bought) {
            btn.textContent = '–ö—É–ø–ª–µ–Ω–æ';
            btn.disabled = true;
        } else {
            btn.textContent = `–ö—É–ø–∏—Ç—å (${upgrades[upgrade].cost} ‚ÇΩ)`;
            btn.disabled = money < upgrades[upgrade].cost;
        }
    });
}

// –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ –∏ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤
setInterval(() => {
    // –ù–∞—á–∏—Å–ª—è–µ–º –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥
    const warehouseMultiplier = 1 + staff.warehouse.count * staff.warehouse.multiplier;
    money += staff.consultant.count * staff.consultant.income * warehouseMultiplier * ratingDebuff;
    
    // –ü—Ä–∏–≤–ª–µ–∫–∞–µ–º –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
    const newCustomers = staff.seller.count * staff.seller.attraction;
    customers = Math.min(customers + newCustomers, maxCustomers);
    
    // –®—Ç—Ä–∞—Ñ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏
    if (customers >= maxCustomers) {
        rating = Math.max(1, rating - 0.05);
        ratingDebuff = 0.8;
    } else {
        ratingDebuff = 1;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º UI —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
    if (newCustomers > 0 || customers >= maxCustomers) {
        updateUI();
    }
}, 1000);

// –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
setInterval(saveGame, 30000);

// ===== –¢–Å–ú–ù–ê–Ø –¢–ï–ú–ê ===== //
const themeToggle = document.getElementById('theme-toggle');
const body = document.body;

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º—ã
function loadTheme() {
    const savedTheme = localStorage.getItem('dnsManagerTheme');
    if (savedTheme === 'dark') {
        body.classList.add('dark-theme');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i> –¢–µ–º–∞';
    }
}

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
themeToggle.addEventListener('click', () => {
    body.classList.toggle('dark-theme');
    if (body.classList.contains('dark-theme')) {
        localStorage.setItem('dnsManagerTheme', 'dark');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i> –¢–µ–º–∞';
    } else {
        localStorage.setItem('dnsManagerTheme', 'light');
        themeToggle.innerHTML = '<i class="fas fa-moon"></i> –¢–µ–º–∞';
    }
});

// –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
loadTheme();
loadGame();
    </script>
</body>

</html>


